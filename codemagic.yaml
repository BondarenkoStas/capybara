# Automatically generated on 2020-04-29 UTC from https://staging.codemagic.io/app/5c80df6467038200016d45e8/settings
# Note that this configuration is not an exact match to UI settings. Review and adjust as necessary.

workflows:
  default-workflow:
    name: Default Workflow
    triggering:
      events:
        - push
      branch_patterns:
        - pattern: 'release_notes'
          include: true
    scripts:
      - |
        export RELEASE_NOTES="$(git-changelog generate --previous-commit ${FCI_PREVIOUS_COMMIT})"
        echo "******************"
        echo "$RELEASE_NOTES"
      - echo "export RELEASE_NOTES=\"$(git-changelog generate --previous-commit ${FCI_PREVIOUS_COMMIT})\"" > ~/envvars.sh
      - |
        source ~/envvars.sh
        echo "$RELEASE_NOTES"
      - git-changelog generate --previous-commit ${FCI_PREVIOUS_COMMIT}
      - echo "$(git-changelog generate --previous-commit ${FCI_PREVIOUS_COMMIT})" > my_release_notes
      - cat my_release_notes 
